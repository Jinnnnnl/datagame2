# 基金投资挑战游戏 - 使用说明

## 游戏概述

这是一个基于真实基金净值数据的投资挑战游戏，让您体验基金投资的全过程，学习投资策略和风险管理。

## 主要改进

### 1. 图表显示优化
- ✅ **动态纵轴范围**：图表会根据数据自动调整，使净值差异更加明显
- ✅ **多样化数据点**：每条折线使用不同形状和颜色的数据标记点
- ✅ **用户组合突出**：您的投资组合使用加粗线条和星形标记点
- ✅ **颜色区分度**：线条颜色与数据点颜色不同，便于区分

### 2. 2022年归一化重置
- ✅ **净值归一化**：进入2022年时，所有产品净值重置为1.0
- ✅ **投资组合重置**：用户投资组合完全重新开始
- ✅ **历史数据清除**：2021年的折线图数据被清除

### 3. 数据更新功能
- ✅ **文件导入**：支持JSON格式的基金数据导入
- ✅ **后台更新**：提供多种数据更新方法
- ✅ **实时更新**：支持定时自动更新数据

## 数据更新方法

### 方法一：文件导入
1. 准备JSON格式的数据文件
2. 点击页面底部的"导入数据"按钮
3. 选择文件并确认导入

### 方法二：控制台更新
打开浏览器开发者工具，在控制台中使用以下命令：

```javascript
// 1. 更新单个基金数据
updateFundData(0, [
    {date: new Date('2022-01-01'), value: 1.0},
    {date: new Date('2022-01-08'), value: 1.015}
]);

// 2. 批量更新所有基金
batchUpdateFunds([
    {data: [{date: new Date('2022-01-01'), value: 1.0}]},
    {data: [{date: new Date('2022-01-01'), value: 1.0}]}
]);

// 3. 完全替换数据
window.fundGame.importFundData([
    {
        name: "中证500指数增强A",
        data: [
            {date: new Date('2022-01-01'), value: 1.0},
            {date: new Date('2022-01-08'), value: 1.015}
        ]
    }
]);
```

### 方法三：API自动更新
```javascript
// 启动自动更新（每60秒从API获取数据）
startAutoUpdate('https://your-api-endpoint.com/fund-data', 60000);

// 停止自动更新
stopAutoUpdate();
```

### 方法四：CSV文件更新
```javascript
// 从CSV内容更新数据
const csvContent = `日期,中证500指数,中证500增强A
2022-01-01,1.0000,1.0000
2022-01-08,1.0150,1.0165`;

updateFromCSV(csvContent);
```

## 数据格式要求

### JSON格式
```json
[
  {
    "name": "基金名称",
    "data": [
      {"date": "2022-01-01", "value": 1.0000},
      {"date": "2022-01-08", "value": 1.0150}
    ]
  }
]
```

### 数据要求
- **时间范围**：2020年12月31日 - 2025年7月31日
- **更新频率**：周度数据（每周四或周五）
- **净值基准**：以1.0000为基准值
- **日期格式**：YYYY-MM-DD

## 游戏规则

### 新手教学（2021年）
- 仅有一次选择机会
- 不计入最终成绩
- 用于熟悉游戏操作

### 正式游戏（2022年起）
- 每年3次调整机会
- 1次固定在年初，2次灵活使用
- 以周为单位推进时间
- 年末统计排名和收益

## 风险指标说明

- **累计收益率**：投资期间的总收益率
- **夏普比率**：风险调整后的收益指标（>1为优秀）
- **最大回撤**：投资期间的最大亏损幅度
- **波动率**：年化收益率标准差

## 操作技巧

1. **观察趋势**：关注不同基金的长期表现趋势
2. **风险控制**：注意最大回撤和波动率指标
3. **时机把握**：合理使用年度调整机会
4. **分散投资**：不要过度集中在单一产品

## 常见问题

### Q: 如何导入您提供的中证500数据？
A: 使用页面底部的导入功能，选择`csi500-sample-data.json`文件。

### Q: 数据更新后图表没有变化？
A: 请刷新页面或在控制台执行`window.fundGame.updateChart()`。

### Q: 如何定期更新数据？
A: 可以设置定时任务，定期调用数据更新API或手动更新文件。

### Q: 游戏数据可以导出吗？
A: 可以，在控制台执行`exportData()`即可导出当前数据。

## 技术支持

如需技术支持或有其他问题，请查看控制台输出的详细说明，或参考`README.md`文件。

---

**提示**：建议使用现代浏览器（Chrome、Firefox、Edge）以获得最佳体验。
